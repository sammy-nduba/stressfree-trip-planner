import"./supabase.YjAYv7ih.js";var S="clover",w=function(e){return e===3?"v3":e},h="https://js.stripe.com",L="".concat(h,"/").concat(S,"/stripe.js"),P=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,b=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var j=function(e){return P.test(e)||b.test(e)},I=function(){for(var e=document.querySelectorAll('script[src^="'.concat(h,'"]')),t=0;t<e.length;t++){var r=e[t];if(j(r.src))return r}return null},y=function(e){var t="",r=document.createElement("script");r.src="".concat(L).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},R=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.5.3",startTime:t})},m=null,f=null,v=null,x=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},T=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},_=function(e){return m!==null?m:(m=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var n=I();if(!(n&&e)){if(!n)n=y(e);else if(n&&v!==null&&f!==null){var a;n.removeEventListener("load",v),n.removeEventListener("error",f),(a=n.parentNode)===null||a===void 0||a.removeChild(n),n=y(e)}}v=T(t,r),f=x(r),n.addEventListener("load",v),n.addEventListener("error",f)}catch(o){r(o);return}}),m.catch(function(t){return m=null,Promise.reject(t)}))},B=function(e,t,r){if(e===null)return null;var n=t[0],a=n.match(/^pk_test/),o=w(e.version),c=S;a&&o!==c&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("8.5.3"," expected Stripe.js@").concat(c,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var l=e.apply(void 0,t);return R(l,r),l},p,E=!1,g=function(){return p||(p=_(null).catch(function(e){return p=null,Promise.reject(e)}),p)};Promise.resolve().then(function(){return g()}).catch(function(i){E||console.warn(i)});var C=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];E=!0;var n=Date.now();return g().then(function(a){return B(a,t,n)})};async function U(){const e=await C("pk_test_your-stripe-publishable-key");if(!document.getElementById("payment-element")?.dataset.clientSecret){console.error("Missing client secret");return}if(!e){const d=document.getElementById("payment-message");d&&(d.textContent="Stripe failed to load. Please refresh the page.",d.classList.remove("hidden"));return}const n=e.elements(),a=n.create("payment");a.mount("#payment-element");const o=document.getElementById("submit-payment"),c=document.getElementById("button-text"),l=document.getElementById("spinner"),s=document.getElementById("payment-message");a.on("ready",()=>{o&&(o.disabled=!1)}),o&&o.addEventListener("click",async d=>{d.preventDefault(),o.disabled=!0,c&&c.classList.add("hidden"),l&&l.classList.remove("hidden"),s&&s.classList.add("hidden");try{const{error:u}=await e.confirmPayment({elements:n,confirmParams:{return_url:`${window.location.origin}/booking/confirmation`}});if(u)throw s&&(s.textContent=u.message||"Payment failed",s.classList.remove("hidden")),u}catch(u){console.error("Payment failed:",u),s&&(s.textContent="Payment failed. Please try again.",s.classList.remove("hidden"))}finally{o.disabled=!1,c&&c.classList.remove("hidden"),l&&l.classList.add("hidden")}})}document.addEventListener("DOMContentLoaded",U);
