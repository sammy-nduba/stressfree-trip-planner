import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.Cd_vQiNd.js";import{s as m}from"./supabase.YjAYv7ih.js";function v({isOpen:f,onClose:x,initialMode:g="login"}){const[r,c]=n.useState(g),[s,p]=n.useState({email:"",password:"",confirmPassword:"",fullName:""}),[u,d]=n.useState(!1),[l,i]=n.useState(""),o=(a,t)=>{p(b=>({...b,[a]:t})),l&&i("")},h=async a=>{a.preventDefault(),d(!0),i("");try{if(r==="login"){const{error:t}=await m.auth.signInWithPassword({email:s.email,password:s.password});if(t)throw t;window.location.href="/";return}else{if(s.password!==s.confirmPassword)throw new Error("Passwords do not match");const{error:t}=await m.auth.signUp({email:s.email,password:s.password,options:{data:{full_name:s.fullName}}});if(t)throw t;alert("Registration successful! Please check your email to verify your account."),c("login")}}catch(t){i(t.message)}finally{d(!1)}};return f?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-serif text-ocean",children:r==="login"?"Welcome Back":"Create Account"}),e.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"Ã—"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r==="signup"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-ocean font-medium mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:s.fullName,onChange:a=>o("fullName",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-ocean font-medium mb-2",children:"Email"}),e.jsx("input",{type:"email",value:s.email,onChange:a=>o("email",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-ocean font-medium mb-2",children:"Password"}),e.jsx("input",{type:"password",value:s.password,onChange:a=>o("password",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal",required:!0,minLength:6})]}),r==="signup"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-ocean font-medium mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",value:s.confirmPassword,onChange:a=>o("confirmPassword",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-teal",required:!0,minLength:6})]}),l&&e.jsx("div",{className:"text-red-500 text-sm bg-red-50 p-3 rounded-lg",children:l}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-teal text-white py-4 rounded-xl font-medium hover:bg-teal/90 transition-colors disabled:opacity-50",children:u?"Please wait...":r==="login"?"Sign In":"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>c(r==="login"?"signup":"login"),className:"text-teal hover:text-teal/80 text-sm",children:r==="login"?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})}):null}export{v as default};
